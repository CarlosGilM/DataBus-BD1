--Executar o script
CREATE SCHEMA databus

CREATE TABLE if not exists databus.cliente( 
                       senha varchar(20),  
                       email varchar(50),  
                       dtNasc varchar(10),  
                       telefone varchar(14),  
                       nome varchar(50),
                       endereco varchar(70),  
                       cpf varchar(14) NOT NULL PRIMARY KEY);
	
CREATE TABLE if not exists databus.passe(
                       numCartao varchar(20) NOT NULL PRIMARY KEY,  
                       saldo float,  
                       validade varchar(10),  
                       idCliente varchar(14)); 

CREATE TABLE if not exists databus.passeAluno( 
                       cpf varchar(14) NOT NULL PRIMARY KEY,  
                       matricula varchar(15),  
                       nome varchar(50),  
                       instituicao varchar(70),  
                       numPasse varchar(20));

CREATE TABLE if not exists databus.passeIdoso(
                       rg varchar(13) NOT NULL,  
                       numPasse varchar(20)); 

CREATE TABLE if not exists databus.dadosPeriodicos(
                       instituicao varchar(70),  
                       nome varchar(60),  
                       matricula varchar(15),  
                       cpf varchar(14) NOT NULL PRIMARY KEY); 

CREATE TABLE if not exists databus.funcionario(
                       email  varchar(12),  
                       senha varchar(12),  
                       codigoFuncion√°rio integer NOT NULL PRIMARY KEY); 

CREATE TABLE if not exists databus.rotas(
                       codigoRota  varchar(3) NOT NULL PRIMARY KEY,  
                       nome  varchar(50)); 

CREATE TABLE if not exists databus.horarios ( 
                      codigoRota  varchar(3) NOT NULL,
                      horario_saida varchar(5),
                      horario_chegada varchar(5)); 

CREATE TABLE if not exists databus.pontos (
                       codigoRota  varchar(3) NOT NULL,
                       ponto_partida varchar(50),
                       ponto_chegada varchar(50)
); 
					   
ALTER TABLE databus.passe ADD FOREIGN KEY(idCliente) REFERENCES databus.cliente(cpf);
ALTER TABLE databus.passeAluno ADD FOREIGN KEY(numPasse) REFERENCES databus.passe(numCartao);
ALTER TABLE databus.passeIdoso ADD FOREIGN KEY(numPasse) REFERENCES databus.passe(numCartao);
ALTER TABLE databus.horarios ADD FOREIGN KEY(codigoRota) REFERENCES databus.rotas(codigoRota);
ALTER TABLE databus.pontos ADD FOREIGN KEY(codigoRota) REFERENCES databus.rotas(codigoRota);